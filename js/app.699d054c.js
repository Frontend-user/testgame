(function(){"use strict";var e={2088:function(e,s,t){var a=t(9242),l=t(1020),n=t(3396),o=(t(560),t(7139)),i=t(4870);const r=(0,l.Q_)("store",{state:()=>({stages:[{name:"Этап первый",id:1,thresholdPoints:25,games:[{name:"Игра 1.1",bestResult:0,isPlayed:!1}]},{name:"Этап второй",id:2,thresholdPoints:50,games:[{name:"Игра 2.1",bestResult:0,isPlayed:!1}]},{id:3,name:"Этап третий",thresholdPoints:100,games:[{name:"Игра 3.1",bestResult:0,isPlayed:!1}]},{id:4,name:"Этап четвертый",thresholdPoints:200,games:[{name:"Игра 4.1",bestResult:0,isPlayed:!1}]},{id:5,name:"Этап пятый",thresholdPoints:500,games:[{name:"Игра 5.1",bestResult:0,isPlayed:!1}]},{id:6,name:"Этап шестой",thresholdPoints:1e3,games:[{name:"Игра 6.1",bestResult:0,isPlayed:!1},{name:"Игра 6.2",bestResult:0,isPlayed:!1}]}],count:0}),actions:{increment(){this.count++},getStages(){localStorage.getItem("stage")||localStorage.setItem("stage",JSON.stringify(this.stages)),this.stages=JSON.parse(localStorage.getItem("stage"))},addStage(e){this.stages.push(e),localStorage.setItem("stage",JSON.stringify(this.stages)),this.getStages()},addGame(e,s){for(let t=0;t<this.stages.length;t++)this.stages[t].id===s&&this.stages[t].games.push(e);localStorage.setItem("stage",JSON.stringify(this.stages)),this.getStages()}}}),d=(0,n._)("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Добавить этап ",-1),u={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},m={class:"modal-dialog"},g={class:"modal-content"},h=(0,n._)("div",{class:"modal-header"},[(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),c={class:"modal-body"},v={key:0,class:"alert alert-danger",role:"alert"},b={class:"row mb-3 g-3"},f={class:"col"},P={class:"col"},p=(0,n._)("h3",{class:"offset-3"},"Выберите стадию",-1),y=["value"],_={class:"row g-3"},R={class:"col"},w={class:"col"},O=(0,n._)("div",{class:"row mb-2"},[(0,n._)("button",{type:"button",class:"offset-3 mt-2 col-6 btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1);var S={__name:"CreateDialog",emits:["refresh"],setup(e,{emit:s}){const t=s,l=r(),S=(0,i.iH)([]),H=(0,i.iH)(0),x=(0,i.iH)(!1);(0,i.iH)(!1);(0,n.bv)((()=>{S.value=l.stages}));const k=(0,i.iH)({id:Date.now(),name:"",thresholdPoints:0,games:[]}),D=(0,i.iH)({name:"",bestResult:0,isPlayed:!1}),j=()=>{if(x.value=!1,k.value.thresholdPoints<=S.value.at(-1).thresholdPoints&&(x.value=!0),!x.value){let e=JSON.parse(JSON.stringify(k.value));k.value.id=0,k.value.name="",k.value.thresholdPoints=0,k.value.games=[],l.addStage(e)}t("refresh"),S.value=l.stages},J=()=>{let e=JSON.parse(JSON.stringify(D.value));D.value={name:"",bestResult:0,isPlayed:!1},l.addGame(e,H.value),t("refresh")};return l.count++,l.$patch({count:l.count+1}),l.increment(),(e,s)=>((0,n.wg)(),(0,n.iD)(n.HY,null,[d,(0,n._)("div",u,[(0,n._)("div",m,[(0,n._)("div",g,[h,(0,n._)("div",c,[x.value?((0,n.wg)(),(0,n.iD)("div",v," Чекпоинты этапа должны быть больше! ")):(0,n.kq)("",!0),(0,n._)("div",b,[(0,n._)("div",f,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>k.value.name=e),type:"text",class:"form-control",placeholder:"Название"},null,512),[[a.nr,k.value.name]])]),(0,n._)("div",P,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>k.value.thresholdPoints=e),type:"number",class:"form-control",placeholder:"Чекпоинт"},null,512),[[a.nr,k.value.thresholdPoints]])]),(0,n._)("div",{class:"row"},[(0,n._)("button",{onClick:j,type:"button",class:"offset-3 mt-2 col-6 btn btn-primary"},"Добавить этап")])]),p,(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":s[2]||(s[2]=e=>H.value=e),class:"form-select mb-2","aria-label":"ывв"},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(S.value,(e=>((0,n.wg)(),(0,n.iD)("option",{value:e.id},(0,o.zw)(e.name),9,y)))),256))],512),[[a.bM,H.value]]),(0,n._)("div",_,[(0,n._)("div",R,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":s[3]||(s[3]=e=>D.value.name=e),type:"text",class:"form-control",placeholder:"Название"},null,512),[[a.nr,D.value.name]])]),(0,n._)("div",w,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":s[4]||(s[4]=e=>D.value.bestResult=e),type:"number",class:"form-control",placeholder:"Рекорд"},null,512),[[a.nr,D.value.bestResult]])])]),(0,n._)("div",{class:"row"},[(0,n._)("button",{onClick:J,type:"button",class:"offset-3 mt-2 col-6 btn btn-primary"},"Добавить игру")]),O])])])])],64))}};const H=S;var x=H,k=t.p+"img/small-star.3f8db2a5.svg",D=t.p+"img/fill-small-star.e1647dfc.svg",j=t.p+"img/win-icon.a4a73727.svg";const J={key:0,class:"custom-progress__dialog"},N={class:"custom-progress__items"},C={class:"custom-progress__item-number"},W={class:"custom-progress__item-image"},I=["src"];var M={__name:"Game",props:["stages"],setup(e){const s=(0,i.iH)([]),t=r(),a=(0,i.iH)([]),l=e,d=(0,i.iH)(!0);(0,n.bv)((()=>{m()}));const u=(e,s)=>{let t=k,a=0;for(let l in s)for(let e of s[l].games)a+=e.bestResult;return a>=e.thresholdPoints&&(t=D),e.thresholdPoints===s.at(-1).thresholdPoints&&(t=j),t},m=()=>{void 0===l.stages?(t.getStages(),a.value=t.stages,g()):a.value=l.stages},g=()=>{s.value=[];for(let e of a.value)s.value.push(e.thresholdPoints)},h=e=>{g();let t=0,a=s.value;for(let s of e)for(let e of s.games)t+=e.bestResult;let l=[0],n=!1,o=0;for(let s=0;s<a.length;s++)a[s]<=t&&!n?l.push(a[s]):a[s]>t&&!n&&(o=a[s],n=!0);let i=0;for(let s=0;s<l.length-1;s++)i+=100;let r=0,u=0;if(e.length>0&&(r=e.at(-1).thresholdPoints),d.value=!0,t>=r){d.value=!1,i=0;for(let e=0;e<l.length-1;e++)i+=100}else(l.at(-1)!==t&&l.at(-1)&&d.value||0===l.at(-1)&&d.value)&&(t-=l.at(-1),u=100*t/(o-l.at(-1)));let m=i+u;return 0===m?0:m>0&&m<10?10:m};return(e,s)=>((0,n.wg)(),(0,n.iD)("div",{class:"custom-progress",style:(0,o.j5)({width:100*a.value.length+"px"})},[l.stages?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",J,[(0,n.Wm)(x,{onRefresh:m})])),(0,n._)("div",N,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.value,(e=>((0,n.wg)(),(0,n.iD)("div",{key:e.id,style:(0,o.j5)({width:100*a.value.length+"px"}),class:"custom-progress__item"},[(0,n._)("div",C,(0,o.zw)(e.thresholdPoints),1),(0,n._)("div",W,[(0,n._)("img",{src:u(e,a.value),alt:""},null,8,I)])],4)))),128))]),(0,n._)("div",{style:(0,o.j5)(`width:${h(a.value)}px; `),class:(0,o.C_)([{rounded:!d.value},"custom-progress__fill"])},null,6)],4))}},U=t(89);const V=(0,U.Z)(M,[["__scopeId","data-v-114eac28"]]);var Y=V,G={__name:"App",setup(e){const s=(0,i.iH)([{name:"Этап первый",id:1,thresholdPoints:25,games:[{name:"Игра 1.1",bestResult:20,isPlayed:!1}]},{name:"Этап второй",id:2,thresholdPoints:50,games:[{name:"Игра 2.1",bestResult:0,isPlayed:!1}]},{id:3,name:"Этап третий",thresholdPoints:100,games:[{name:"Игра 3.1",bestResult:0,isPlayed:!1}]},{id:4,name:"Этап четвертый",thresholdPoints:200,games:[{name:"Игра 4.1",bestResult:0,isPlayed:!1}]},{id:5,name:"Этап пятый",thresholdPoints:500,games:[{name:"Игра 5.1",bestResult:0,isPlayed:!1}]},{id:6,name:"Этап шестой",thresholdPoints:1e3,games:[{name:"Игра 6.1",bestResult:0,isPlayed:!1},{name:"Игра 6.2",bestResult:0,isPlayed:!1}]}]),t=(0,i.iH)([{name:"Этап первый",id:1,thresholdPoints:25,games:[{name:"Игра 1.1",bestResult:25,isPlayed:!1}]},{name:"Этап второй",id:2,thresholdPoints:50,games:[{name:"Игра 2.1",bestResult:0,isPlayed:!1}]},{id:3,name:"Этап третий",thresholdPoints:100,games:[{name:"Игра 3.1",bestResult:0,isPlayed:!1}]},{id:4,name:"Этап четвертый",thresholdPoints:200,games:[{name:"Игра 4.1",bestResult:0,isPlayed:!1}]},{id:5,name:"Этап пятый",thresholdPoints:500,games:[{name:"Игра 5.1",bestResult:0,isPlayed:!1}]},{id:6,name:"Этап шестой",thresholdPoints:1e3,games:[{name:"Игра 6.1",bestResult:0,isPlayed:!1},{name:"Игра 6.2",bestResult:0,isPlayed:!1}]}]),a=(0,i.iH)([{name:"Этап первый",id:1,thresholdPoints:25,games:[{name:"Игра 1.1",bestResult:20,isPlayed:!1}]},{name:"Этап второй",id:2,thresholdPoints:50,games:[{name:"Игра 2.1",bestResult:0,isPlayed:!1}]},{id:3,name:"Этап третий",thresholdPoints:100,games:[{name:"Игра 3.1",bestResult:0,isPlayed:!1}]},{id:4,name:"Этап четвертый",thresholdPoints:200,games:[{name:"Игра 4.1",bestResult:170,isPlayed:!1}]},{id:5,name:"Этап пятый",thresholdPoints:500,games:[{name:"Игра 5.1",bestResult:500,isPlayed:!1}]},{id:6,name:"Этап шестой",thresholdPoints:1e3,games:[{name:"Игра 6.1",bestResult:0,isPlayed:!1},{name:"Игра 6.2",bestResult:0,isPlayed:!1}]}]),l=(0,i.iH)([{name:"Этап первый",id:1,thresholdPoints:25,games:[{name:"Игра 1.1",bestResult:20,isPlayed:!1}]},{name:"Этап второй",id:2,thresholdPoints:50,games:[{name:"Игра 2.1",bestResult:0,isPlayed:!1}]},{id:3,name:"Этап третий",thresholdPoints:100,games:[{name:"Игра 3.1",bestResult:0,isPlayed:!1}]},{id:4,name:"Этап четвертый",thresholdPoints:200,games:[{name:"Игра 4.1",bestResult:0,isPlayed:!1}]},{id:5,name:"Этап пятый",thresholdPoints:500,games:[{name:"Игра 5.1",bestResult:0,isPlayed:!1}]},{id:6,name:"Этап шестой",thresholdPoints:1e3,games:[{name:"Игра 6.1",bestResult:980,isPlayed:!1},{name:"Игра 6.2",bestResult:0,isPlayed:!1}]}]);return(e,o)=>((0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(Y),(0,n.Wm)(Y,{stages:s.value},null,8,["stages"]),(0,n.Wm)(Y,{stages:t.value},null,8,["stages"]),(0,n.Wm)(Y,{stages:a.value},null,8,["stages"]),(0,n.Wm)(Y,{stages:l.value},null,8,["stages"])],64))}};const q=G;var z=q,K=t(2483);const T=[],$=(0,K.p7)({history:(0,K.r5)(),routes:T});var A=$;const B=(0,l.WB)();(0,a.ri)(z).use(B).use(A).mount("#app")}},s={};function t(a){var l=s[a];if(void 0!==l)return l.exports;var n=s[a]={exports:{}};return e[a].call(n.exports,n,n.exports,t),n.exports}t.m=e,function(){var e=[];t.O=function(s,a,l,n){if(!a){var o=1/0;for(u=0;u<e.length;u++){a=e[u][0],l=e[u][1],n=e[u][2];for(var i=!0,r=0;r<a.length;r++)(!1&n||o>=n)&&Object.keys(t.O).every((function(e){return t.O[e](a[r])}))?a.splice(r--,1):(i=!1,n<o&&(o=n));if(i){e.splice(u--,1);var d=l();void 0!==d&&(s=d)}}return s}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[a,l,n]}}(),function(){t.n=function(e){var s=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(s,{a:s}),s}}(),function(){t.d=function(e,s){for(var a in s)t.o(s,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:s[a]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)}}(),function(){t.p="/testgame/"}(),function(){var e={143:0};t.O.j=function(s){return 0===e[s]};var s=function(s,a){var l,n,o=a[0],i=a[1],r=a[2],d=0;if(o.some((function(s){return 0!==e[s]}))){for(l in i)t.o(i,l)&&(t.m[l]=i[l]);if(r)var u=r(t)}for(s&&s(a);d<o.length;d++)n=o[d],t.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return t.O(u)},a=self["webpackChunktestgame"]=self["webpackChunktestgame"]||[];a.forEach(s.bind(null,0)),a.push=s.bind(null,a.push.bind(a))}();var a=t.O(void 0,[998],(function(){return t(2088)}));a=t.O(a)})();
//# sourceMappingURL=app.699d054c.js.map